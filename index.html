<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<head>
    <title>Online Gender Correlation Study</title>
</head>
<body onload="document.getElementById('privacyP').style.display='block'">
    
    <script>
        var uid = 0;
        var groupid = 239444090160654;
        window.fbAsyncInit = function() {
            FB.init({
                appId            : '179422109430160',
                autoLogAppEvents : true,
                xfbml            : true,
                version          : 'v3.0'
            });

            FB.getLoginStatus(function(response){
                statusChangeCallback(response);
            });
            
            FB.AppEvents.logPageView();  
            
        };
            (function(d, s, id){
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {return;}
                js = d.createElement(s); js.id = id;
                js.src = "https://connect.facebook.net/en_US/sdk.js";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));

        function checkLoginState(){
            FB.getLoginStatus(function(response){
                statusChangeCallback(response);
            });
        };
        
        function statusChangeCallback(response){
            if(response.status === 'connected'){
                uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
                console.log("You have sucessfully logged in with UID: " + uid);
                FB.api('/' + uid, function(response){
                    console.log(response.name);
                });
                
                /*FB.api('/' + uid + '/user_gender', 'GET', {}, function(response){
                    console.log(response);
                });*/
                
                
                
                FB.api("/" + groupid + "/members", function (response) {
                    console.log(response);
                });
                /*FB.api( '/' + uid + '/friends', 'GET', {}, function(response) {
                    console.log(response);
                });*/    
            }else{
                console.log("You are not logged in");
            }
        };

        function logOut(){
            FB.logout(function(response){});
            console.log("User has logged out");
        }
        
    </script>
    <div class="w3-container">
        <img class="w3-center w3-round-large w3-card w3-animate-zoom" src="media/JTAnalyticsLogo2.png" alt="logo" style="display: block; margin-left: auto; margin-right: auto; margin-top: 100px; width: 30%;">
    </div>
    <br>
    <div class="w3-container w3-center">
        <fb:login-button scope="public_profile,email" onlogin="checkLoginState();"></fb:login-button>
        <fb:login-button scope="public_profile,email" onlogin="logOut();">Log Out</fb:login-button>
        <br>
        <br>
    </div>
    
    
    <div id="privacyP" class="w3-modal">
        <div class="w3-modal-content">
            <div class="w3-container w3-small">
                <h5>Privacy Policy:</h5>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed consectetur ex ut nulla facilisis, a tristique urna scelerisque. Sed id nisl dui. Morbi nec nibh ultrices metus pulvinar viverra eget eu leo. Donec dictum ornare finibus. Duis nibh purus, tristique ac lacinia at, ullamcorper feugiat tortor. Nunc ornare dui leo, nec facilisis nibh porta vitae. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed at tristique dolor. Aenean imperdiet facilisis cursus. Curabitur ullamcorper urna et quam blandit fringilla. Etiam imperdiet vehicula est at semper. Cras id accumsan ex. Aenean pretium consequat nulla, vel pretium leo porttitor ut.</p>
                <p><button onclick="document.getElementById('privacyP').style.display='none'" class="w3-button w3-small w3-round w3-green">Agree</button></p>
            </div>
        </div>
        
    </div>
    <div id="test"></div>
</body>
</html>
